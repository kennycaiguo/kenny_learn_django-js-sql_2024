{% extends 'layout.html' %}
{% load static %}

{% block title %}
    <title>Ajax请求学习</title>
{% endblock %}

{% block content %}
  <div class="container">
    <h1>任务管理</h1>
    <h3>任务实例1</h3>
      <input type="button" id="btn1" class="btn btn-primary" value="点击我发送任务请求">
    <h3>任务实例2</h3>

      <input type="text" id="txtName"  placeholder="姓名">
      <input type="text" id="txtAge"  placeholder="年龄">
      <input type="button" id="btn2" class="btn btn-success" value="点击我发送任务请求">

      <h3>任务实例3</h3>
      <form id="dataForm">
          <input type="text" name="user"  placeholder="姓名">
          <input type="text" name="age"  placeholder="年龄">
          <input type="text" name="email"  placeholder="邮箱">
          <input type="text" name="intro"  placeholder="简介">
          <input type="button" id="btn3" class="btn btn-success" value="点击我发送表单数据">
      </form>
  </div>
{% endblock %}

{% block js %}
    <script>
     $(function () {
         $('#btn1').click(function () {
          {#alert("btn clicked...")#}
          //发送ajax请求
          $.ajax({
              url:"/task/test/ajax/",
              {#type:"get",#}
              type:"post",
              data:{
                  n1:123,
                  n2:456
              },
              dataType:"JSON",
              success:function (ret){
                  {#console.log(ret)#}
                  console.log(ret.status) //加了上面的dataType后它会自动把数据转化为json对象,我们就可以用.xx的方式来获取属性
                  console.log(ret.data)
               }
              })
          })
         $('#btn2').click(function () {
          {#alert("btn clicked...")#}
          {#   console.log($("#txtName").val())#}
          //发送ajax请求
          $.ajax({
              url:"/task/test/ajax/",
              {#type:"get",#}
              type:"post",
              data:{
                  n1:$("#txtName").val(),
                  n2:$("#txtAge").val()
              },
              dataType:"JSON",
              success:function (ret){
                  {#console.log(ret)#}
                  console.log(ret.status) //加了上面的dataType后它会自动把数据转化为json对象,我们就可以用.xx的方式来获取属性
                  console.log(ret.data)
               }
              })
          })
         $('#btn3').click(function () {
         console.log($("#dataForm").serialize())
          //发送ajax请求
          $.ajax({
              url:"/task/test/ajax2/",
              type:"post",
              data:$("#dataForm").serialize(),
              dataType:"JSON",
              success:function (ret){
                  {#console.log(ret)#}
                  console.log(ret.status) //加了上面的dataType后它会自动把数据转化为json对象,我们就可以用.xx的方式来获取属性
                  console.log(ret.data)
               }
              })
          })
     })
    </script>
{% endblock %}